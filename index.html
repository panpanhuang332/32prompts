<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ICS Lab Pro - V7.6 Hardcore No-Text</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>tailwind.config = { darkMode: 'media' }</script>
    <style>
        body { -webkit-tap-highlight-color: transparent; transition: background-color 0.4s ease; }
        .app-card { border-radius: 32px; transition: all 0.3s ease; }
        .gradient-header { background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); }
        @media (prefers-color-scheme: dark) { body { background-color: #0f172a; } }
        @keyframes dice-roll { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .rolling { animation: dice-roll 0.5s ease-in-out; }
        select { appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 1.2rem center; background-repeat: no-repeat; background-size: 1.2em; }
        select:disabled { opacity: 0.5; cursor: not-allowed; background-color: #f1f5f9; color: #94a3b8; }
    </style>
</head>
<body class="p-4 bg-slate-50 dark:bg-slate-900 min-h-screen font-sans pb-10 flex justify-center items-start">

    <div class="w-full max-w-md bg-white dark:bg-slate-800 app-card shadow-2xl overflow-hidden border border-gray-100 dark:border-slate-700">
        <div class="p-9 gradient-header text-white relative">
            <h1 class="text-3xl font-black italic flex items-center gap-3 relative z-10">
                <i class="fas fa-eye-slash text-yellow-300"></i> ICS Lab Pro
            </h1>
            <p class="text-indigo-100 text-[10px] mt-2 font-bold tracking-[0.3em] opacity-90 uppercase relative z-10">V7.6 Encyclopedia & No-Text Logic</p>
            <button onclick="randomStyleOnly()" class="absolute bottom-6 right-6 bg-white/20 hover:bg-white/30 backdrop-blur-md p-3 rounded-2xl border border-white/30 transition-all active:scale-90 group shadow-lg">
                <i id="diceIcon" class="fas fa-dice text-2xl text-white"></i>
            </button>
        </div>

        <div class="p-7 space-y-8">
            <section>
                <label class="text-[10px] font-black text-indigo-500 mb-3 block tracking-[0.2em] uppercase">Step 01. åœ–ç‰‡é¡å‹</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setType('general', this)" class="type-btn ring-2 ring-indigo-500 bg-indigo-50 dark:bg-indigo-900/40 p-2.5 rounded-xl text-indigo-700 dark:text-indigo-300 text-[10px] font-bold transition-all">é€šç”¨åœ–åƒ</button>
                    <button onclick="setType('infographic', this)" class="type-btn border border-gray-100 p-2.5 rounded-xl text-gray-500 text-[10px] font-medium transition-all">è³‡è¨Šåœ–è¡¨</button>
                    <button onclick="setType('portrait', this)" class="type-btn border border-gray-100 p-2.5 rounded-xl text-gray-500 text-[10px] font-medium transition-all">äººåƒæ”å½±</button>
                </div>
            </section>

            <section>
                <label class="text-[10px] font-black text-indigo-500 mb-3 block tracking-[0.2em] uppercase">Step 02. å…§å®¹ä¸»é¡Œ</label>
                <textarea id="content" rows="2" placeholder="ä¾‹å¦‚ï¼šæµ·ç˜çš„è½æ—¥ (ä¸éœ€åŠ å¼•è™Ÿ)" class="w-full p-4 bg-gray-50 dark:bg-slate-900 border border-gray-100 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none text-gray-700 dark:text-slate-200 transition-all text-sm shadow-inner"></textarea>
            </section>

            <section class="space-y-3">
                <label class="text-[10px] font-black text-indigo-500 block tracking-[0.2em] uppercase">Step 03. è¦–è¦ºé¢¨æ ¼ç™¾ç§‘å…¨æ›¸</label>
                
                <select id="styleCategory" onchange="vibrate(); updateTieredUI()" class="w-full p-4 bg-indigo-50/50 dark:bg-slate-900 border border-indigo-100 rounded-2xl font-black text-indigo-600 text-sm">
                    <option value="" disabled selected>1. é¸æ“‡å¤§åˆ†é¡...</option>
                    <option value="Photography">ğŸ“¸ æ”å½±é¢¨æ ¼èˆ‡å·¥è—</option>
                    <option value="LensLight">ğŸ‘ï¸ é¡é ­åƒæ•¸èˆ‡å…‰å½±</option>
                    <option value="Angles">ğŸ“ å–æ™¯é è¿‘èˆ‡è§’åº¦</option>
                    <option value="MediaCraft">ğŸ–Œï¸ åª’æã€æè³ªèˆ‡å·¥è—</option>
                    <option value="ArtStyle">ğŸ›ï¸ è—è¡“æµæ´¾èˆ‡å¤§å¸«</option>
                    <option value="AnimDesign">ğŸ¬ å‹•ç•«ã€æ¼«æ™èˆ‡è¨­è¨ˆ</option>
                </select>

                <select id="styleDetail" onchange="vibrate(); updatePreview()" class="w-full p-4 bg-gray-50 dark:bg-slate-900 border border-gray-100 rounded-2xl font-bold text-gray-700 text-sm" disabled>
                    <option value="">2. å†é¸æ“‡å…·é«”è¦æ ¼...</option>
                </select>

                <select id="proAssist" onchange="vibrate(); updatePreview()" class="w-full p-4 bg-gray-50 dark:bg-slate-900 border border-gray-100 rounded-2xl font-bold text-gray-700 text-sm" disabled>
                    <option value="" selected>3. å°ˆæ¥­æ”å½±è¼”åŠ© (é–å®šä¸­)...</option>
                    <option value="bright">ç’°å¢ƒè¼ƒæ˜äº® Bright</option>
                    <option value="dark">ç’°å¢ƒè¼ƒæš— Dark</option>
                    <option value="realistic">é€¼çœŸçš„ Realistic</option>
                    <option value="very realistic">æ¥µè‡´é€¼çœŸ (æ¯›é«®ç´‹ç†)</option>
                    <option value="8K">8K é ‚ç´šç•«è³ª</option>
                </select>

                <div id="previewCard" class="hidden p-4 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-indigo-100 animate-in fade-in">
                    <p id="previewText" class="text-xs text-indigo-600 dark:text-indigo-300 leading-relaxed font-bold"></p>
                </div>
            </section>

            <section class="space-y-3">
                <label class="text-[10px] font-black text-indigo-500 block tracking-[0.2em] uppercase">Step 04. é•·å¯¬æ¯”ä¾‹</label>
                <select id="ratioSelect" onchange="vibrate(); handleRatioChange()" class="w-full p-4 bg-gray-50 dark:bg-slate-900 border border-gray-100 rounded-2xl font-bold text-gray-700 text-sm">
                    <option value="1:1">1:1 (æ­£æ–¹å½¢)</option>
                    <option value="9:16" selected>9:16 (çŸ­å½±éŸ³)</option>
                    <option value="16:9">16:9 (æ©«å‘è¦–è§’)</option>
                    <option value="21:9">21:9 (Notion å°é¢)</option>
                    <option value="custom">âœï¸ è‡ªè¨‚é•·å¯¬ (Custom)</option>
                </select>
                <div id="customRatioBox" class="hidden"><input type="text" id="customRatioInput" placeholder="ä¾‹å¦‚ 2.35:1" class="w-full p-3 border rounded-xl"></div>
            </section>

            <button onclick="vibrate(); generate()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl active:scale-[0.96] flex justify-center items-center gap-2 text-lg">
                ç”Ÿæˆç´”æ·¨æŒ‡ä»¤ <i class="fas fa-magic"></i>
            </button>

            <div id="resultBox" class="hidden animate-in zoom-in-95 duration-300">
                <div class="bg-slate-900 rounded-[2rem] p-7 border border-slate-700 shadow-2xl relative">
                    <p id="finalPrompt" class="text-indigo-200 text-xs font-mono whitespace-pre-line leading-relaxed bg-slate-950 p-5 rounded-2xl border border-white/5 mb-6"></p>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="vibrate(); copyText()" class="bg-indigo-600 text-white p-4 rounded-xl flex items-center justify-center"><i class="far fa-copy"></i></button>
                        <button onclick="vibrate(); shareLine()" class="bg-[#06C755] text-white p-4 rounded-xl flex items-center justify-center"><i class="fab fa-line text-lg"></i></button>
                        <button onclick="vibrate(); shareFB()" class="bg-[#1877F2] text-white p-4 rounded-xl flex items-center justify-center"><i class="fab fa-facebook text-lg"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const categoryMap = {
            "Photography": ["Photo", "life photo", "group photo", "portrait photography", "DSLR style", "Polaroid style", "Fujifilm", "Calotype print", "Albumen print"],
            "LensLight": ["macro lens", "wide angle lens", "fish eye lens", "tilt shift lens", "bokeh", "magic hour", "golden hour", "soft light"],
            "Angles": ["face close-up", "full body shot", "far away shot", "low angle view", "bird view", "satellite view", "first person view"],
            "MediaCraft": ["pencil", "watercolor painting", "oil painting", "ink drawing", "paper art", "origami art", "mosaic", "LEGO"],
            "ArtStyle": ["Renaissance", "Impressionism", "Surrealism", "Cyber Art", "Da Vinci", "Van Gogh", "Dali"],
            "AnimDesign": ["2D cartoon", "Manga", "American comic book", "Studio Ghibli", "Pixar", "mascot logo", "knolling"]
        };

        const styleDisplayNames = {
            "Photo": "æ¨™æº–ç…§ç‰‡ Photo", "life photo": "ç”Ÿæ´»ç…§ (è‡ªç„¶)", "group photo": "åœ˜é«”ç…§", "portrait photography": "äººåƒæ”å½±", "DSLR style": "æ•¸ä½å–®çœ¼", "Polaroid style": "æ‹ç«‹å¾—", "macro lens": "å¾®è·é¡é ­", "wide angle lens": "å»£è§’é¡é ­", "bird view": "é³¥ç°è¦–è§’", "Studio Ghibli": "å‰åœåŠ›ç•«é¢¨", "knolling": "é–‹ç®±æ’åˆ—ç…§", "mascot logo": "å‰ç¥¥ç‰©æ¨™èªŒ"
        };

        const styleSpecs = {
            "Photo": { spec: "Realistic photography, clear details.", desc: "æ¨™æº–å¯«å¯¦é¢¨æ ¼ã€‚" },
            "macro lens": { spec: "Macro lens, extreme close-up details.", desc: "æ•æ‰å¾®å°ç´°ç¯€ã€‚" },
            "bird view": { spec: "Bird's eye view, looking down from above.", desc: "ç”±é«˜è™•å‘ä¸‹ä¿¯ç°ã€‚" },
            "bright": { spec: "Bright lighting, high key.", desc: "ç’°å¢ƒæ˜äº®ã€‚" },
            "8K": { spec: "8K resolution, extreme details.", desc: "æ¥µè‡´ç•«è³ªã€‚" }
        };

        let selectedType = 'general';
        let history = JSON.parse(localStorage.getItem('prompt_history_v76') || '[]');

        function vibrate() { if (navigator.vibrate) navigator.vibrate(15); }

        function handleRatioChange() {
            const s = document.getElementById('ratioSelect');
            document.getElementById('customRatioBox').className = s.value === 'custom' ? 'block' : 'hidden';
        }

        function updateTieredUI(defaultStyle = "") {
            const cat = document.getElementById('styleCategory').value;
            const detail = document.getElementById('styleDetail');
            const assist = document.getElementById('proAssist');

            detail.innerHTML = '<option value="">2. å†é¸æ“‡å…·é«”è¦æ ¼...</option>';
            detail.disabled = !cat;
            if (cat && categoryMap[cat]) {
                categoryMap[cat].forEach(k => {
                    const opt = document.createElement('option');
                    opt.value = k; opt.textContent = styleDisplayNames[k] || k;
                    detail.appendChild(opt);
                });
                if (defaultStyle) detail.value = defaultStyle;
            }

            assist.disabled = (cat !== "Photography" && cat !== "LensLight");
            if (assist.disabled) { assist.value = ""; assist.options[0].textContent = "3. å°ˆæ¥­æ”å½±è¼”åŠ© (é–å®šä¸­)..."; }
            else { assist.options[0].textContent = "3. å°ˆæ¥­æ”å½±è¼”åŠ© (é¸å¡«)..."; }
            updatePreview();
        }

        function setType(type, btn) {
            selectedType = type;
            document.querySelectorAll('.type-btn').forEach(b => b.className = 'type-btn border border-gray-100 p-2.5 rounded-xl text-gray-500 text-[10px] font-medium transition-all');
            btn.className = 'type-btn ring-2 ring-indigo-500 bg-indigo-50 p-2.5 rounded-xl text-indigo-700 text-[10px] font-bold transition-all shadow-sm';
        }

        function randomStyleOnly() {
            vibrate();
            const cats = Object.keys(categoryMap);
            const randomCat = cats[Math.floor(Math.random() * cats.length)];
            document.getElementById('styleCategory').value = randomCat;
            updateTieredUI(categoryMap[randomCat][Math.floor(Math.random() * categoryMap[randomCat].length)]);
        }

        function updatePreview() {
            const d = document.getElementById('styleDetail').value;
            const a = document.getElementById('proAssist').value;
            const card = document.getElementById('previewCard');
            if (d || a) { document.getElementById('previewText').innerText = "ğŸ’¡ é¢¨æ ¼çµ„åˆå·²å°±ç·’ã€‚"; card.classList.remove('hidden'); }
            else { card.classList.add('hidden'); }
        }

        function generate() {
            const content = document.getElementById('content').value.trim() || "Amazing View";
            const style = document.getElementById('styleDetail').value;
            const assist = document.getElementById('proAssist').value;
            if(!style) return alert('è«‹é¸æ“‡è¦–è¦ºé¢¨æ ¼ï¼');
            
            const ratioSelect = document.getElementById('ratioSelect').value;
            let arValue = ratioSelect === 'custom' ? (document.getElementById('customRatioInput').value || "1:1") : ratioSelect;
            
            let specsStr = (styleSpecs[style]?.spec || style) + (assist ? ", " + (styleSpecs[assist]?.spec || assist) : "");
            
            // V7.6 çµ‚æ¥µä¿®æ­£ï¼šå¼·åˆ¶åŠ å…¥è² å‘æŒ‡ä»¤ä¸¦èª¿æ•´èªæ³•
            const prompt = `/imagine prompt: A ${style} ${assist || ""} style ${selectedType} showcasing ${content} --ar ${arValue} --no text, words, letters, font, watermark, logo, signature --v 6.1`;
            
            document.getElementById('finalPrompt').innerText = prompt;
            document.getElementById('resultBox').classList.remove('hidden');
        }

        function copyText() { navigator.clipboard.writeText(document.getElementById('finalPrompt').innerText); alert('æŒ‡ä»¤å·²è¤‡è£½ï¼'); }
        function shareLine() { window.open(`https://line.me/R/msg/text/?${encodeURIComponent(document.getElementById('finalPrompt').innerText)}`); }
        function shareFB() { window.open(`https://www.facebook.com/sharer/sharer.php?u=${window.location.href}`); }
    </script>
</body>
</html>
