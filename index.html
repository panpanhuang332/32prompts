<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Midjourney æç¤ºè©ç”¢ç”Ÿå™¨ (OXXO Style)</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#343a40">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; padding-bottom: 80px; }
        .container { max-width: 800px; margin-top: 30px; }
        .form-label { font-weight: bold; color: #495057; }
        .result-box { position: sticky; bottom: 0; background: white; padding: 15px; border-top: 1px solid #dee2e6; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 1000; }
        textarea { resize: none; }
        .category-group { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 20px; }
        h5 { border-left: 5px solid #0d6efd; padding-left: 10px; margin-bottom: 20px; color: #343a40; }
        .loading-text { font-size: 0.9em; color: #6c757d; display: none; }
    </style>
</head>
<body>

<div class="container">
    <header class="text-center mb-4">
        <h1>ğŸ¨ MJ æç¤ºè©ç”¢ç”Ÿå™¨</h1>
        <p class="text-muted">è³‡æ–™ä¾†æºï¼šOXXO.STUDIO | æ”¯æ´è‡ªå‹•ä¸­ç¿»è‹±</p>
    </header>

    <div class="category-group">
        <h5>1. ç•«é¢ä¸»é«” (å¿…å¡«)</h5>
        <div class="mb-3">
            <label for="mainSubject" class="form-label">è«‹è¼¸å…¥æƒ³è¦ç”¢ç”Ÿçš„å…§å®¹ (æ”¯æ´ä¸­æ–‡)</label>
            <div class="input-group">
                <input type="text" class="form-control" id="mainSubject" placeholder="ä¾‹å¦‚ï¼šä¸€éš»è²“ååœ¨å±‹é ‚ä¸Š">
                <button class="btn btn-outline-primary" type="button" id="translateBtn" onclick="translateInput()">
                    ğŸ”„ ä¸­ç¿»è‹±
                </button>
            </div>
            <div id="translationStatus" class="loading-text mt-1">æ­£åœ¨ç¿»è­¯ä¸­...</div>
            <div class="form-text text-muted">è¼¸å…¥ä¸­æ–‡å¾Œï¼Œå¯é»é¸ã€Œä¸­ç¿»è‹±ã€æˆ–ç›´æ¥ç”¢å‡ºï¼Œç³»çµ±æœƒè‡ªå‹•è½‰æ›ã€‚</div>
        </div>
    </div>

    <div id="optionsContainer">
        </div>

</div>

<div class="result-box">
    <div class="container">
        <div class="d-grid gap-2 mb-2">
            <button class="btn btn-primary btn-lg" onclick="generatePrompt()">âœ¨ ç”¢å‡ºæç¤ºè© (Generate)</button>
        </div>
        <label for="outputPrompt" class="form-label visually-hidden">ç”Ÿæˆçš„æç¤ºè©</label>
        <div class="input-group">
            <textarea class="form-control" id="outputPrompt" rows="3" readonly></textarea>
            <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard()">è¤‡è£½</button>
        </div>
    </div>
</div>

<script>
    // è³‡æ–™åº«ï¼šä¾æ“š OXXO ç¶²ç«™å…§å®¹æ•´ç†
    const data = {
        "é¡å‹ (Types)": [
            {val: "photo", label: "ç…§ç‰‡ (photo)"},
            {val: "photography", label: "æ”å½± (photography)"},
            {val: "life photo", label: "ç”Ÿæ´»ç…§ (life photo)"},
            {val: "group photo", label: "åœ˜é«”ç…§ (group photo)"},
            {val: "selfie photo", label: "è‡ªæ‹ç…§ (selfie photo)"},
            {val: "portrait photography", label: "äººåƒæ”å½± (portrait photography)"},
            {val: "sports photography", label: "é‹å‹•æ”å½± (sports photography)"},
            {val: "still life photo", label: "éœç‰©æ”å½± (still life photo)"}
        ],
        "ç‰¹è‰² (Features)": [
            {val: "DSLR style", label: "æ•¸ä½å–®çœ¼ (DSLR style)"},
            {val: "Polaroid style", label: "æ‹ç«‹å¾— (Polaroid style)"},
            {val: "gopro style", label: "GoPro é¢¨æ ¼ (gopro style)"},
            {val: "Fujifilm superia style", label: "å¯Œå£«åº•ç‰‡ (Fujifilm superia style)"},
            {val: "LOMO style", label: "LOMO é¢¨æ ¼ (LOMO style)"},
            {val: "B/W style", label: "é»‘ç™½ç…§ç‰‡ (B/W style)"},
            {val: "movie style", label: "é›»å½±é¢¨ (movie style)"},
            {val: "cinematic photo style", label: "åŠ‡ç…§ (cinematic photo style)"},
            {val: "vintage photo style", label: "å¾©å¤ç…§ç‰‡ (vintage photo style)"},
            {val: "very detailed", label: "éå¸¸å¤šç´°ç¯€ (very detailed)"},
            {val: "8K", label: "8K ç•«è³ª (8K)"},
            {val: "HDR", label: "é«˜å‹•æ…‹ç¯„åœ (HDR)"},
            {val: "bokeh", label: "æ•£æ™¯/æ™¯æ·± (bokeh)"},
            {val: "magic hour", label: "é­”å¹»æ™‚åˆ» (magic hour)"},
            {val: "golden hour", label: "é»ƒé‡‘æ™‚åˆ» (golden hour)"},
            {val: "lens flare", label: "é¡é ­çœ©å…‰ (lens flare)"}
        ],
        "ç•«é¢è§’åº¦æ•ˆæœ (Camera Angles)": [
            {val: "facial features extreme close up", label: "äº”å®˜ç‰¹å¯« (facial features extreme close up)"},
            {val: "face close-up", label: "è‡‰éƒ¨ç‰¹å¯« (face close-up)"},
            {val: "full body shot", label: "å…¨èº«ç…§ (full body shot)"},
            {val: "wide angle lens", label: "å»£è§’é¡é ­ (wide angle lens)"},
            {val: "fish eye lens", label: "é­šçœ¼é¡é ­ (fish eye lens)"},
            {val: "bird view", label: "é³¥ç°è¦–è§’ (bird view)"},
            {val: "low angle view", label: "ä½è§’åº¦/ä»°è¦– (low angle view)"},
            {val: "top down view", label: "é«˜è§’åº¦/ä¿¯è¦– (top down view)"},
            {val: "satellite view", label: "è¡›æ˜Ÿè¦–è§’ (satellite view)"},
            {val: "macro lens", label: "å¾®è·é¡é ­ (macro lens)"}
        ],
        "ç‰¹æ®Šç•«é¢æ•ˆæœ (Special Effects)": [
            {val: "product view", label: "ç”¢å“ç…§ (product view)"},
            {val: "knolling", label: "é–‹ç®±ç…§/å¹³é‹ª (knolling)"},
            {val: "microscope view", label: "é¡¯å¾®é¡æ•ˆæœ (microscope view)"},
            {val: "X-ray view", label: "Xå…‰ç‰‡é¢¨æ ¼ (X-ray view)"},
            {val: "360 degrees photo", label: "360åº¦ç…§ç‰‡ (360 degrees photo)"},
            {val: "double exposure", label: "é‡è¤‡æ›å…‰ (double exposure)"},
            {val: "glitch art", label: "æ•…éšœè—è¡“ (glitch art)"},
            {val: "motion blur", label: "å‹•æ…‹æ¨¡ç³Š (motion blur)"}
        ],
        "ç¹ªç•«åª’æ (Mediums)": [
            {val: "pencil", label: "é‰›ç­†ç•« (pencil)"},
            {val: "charcoal", label: "ç‚­ç­†ç•« (charcoal)"},
            {val: "color pencil", label: "å½©è‰²é‰›ç­† (color pencil)"},
            {val: "illustration", label: "æ’ç•« (illustration)"},
            {val: "acrylic painting", label: "å£“å…‹åŠ›é¡æ–™ (acrylic painting)"},
            {val: "watercolor painting", label: "æ°´å½©ç•« (watercolor painting)"},
            {val: "oil painting", label: "æ²¹ç•« (oil painting)"},
            {val: "ink drawing", label: "æ°´å¢¨ç•« (ink drawing)"},
            {val: "Ukiyo-e", label: "æµ®ä¸–ç¹ª (Ukiyo-e)"},
            {val: "Woodcut", label: "æœ¨åˆ»ç‰ˆç•« (Woodcut)"},
            {val: "vector art", label: "å‘é‡åœ– (vector art)"}
        ],
        "ææ–™èˆ‡æè³ª (Materials)": [
            {val: "paper art", label: "ç´™é›•è—è¡“ (paper art)"},
            {val: "origami art", label: "æ‘ºç´™è—è¡“ (origami art)"},
            {val: "stained glass", label: "å½©ç¹ªç»ç’ƒ (stained glass)"},
            {val: "mosaic", label: "é¦¬è³½å…‹ (mosaic)"},
            {val: "pixel art", label: "åƒç´ ç•« (pixel art)"},
            {val: "wood carving", label: "æœ¨é›• (wood carving)"},
            {val: "stone carving", label: "çŸ³é›• (stone carving)"},
            {val: "ceramics material", label: "é™¶ç“· (ceramics material)"},
            {val: "metal arts", label: "é‡‘å±¬ (metal arts)"},
            {val: "lego", label: "æ¨‚é«˜ (lego)"},
            {val: "felt doll", label: "ç¾Šæ¯›æ°ˆ (felt doll)"},
            {val: "neon light", label: "éœ“è™¹ç‡ˆ (neon light)"}
        ],
        "å‹•ç•«å¡é€šå‹•æ¼« (Anime/Cartoon)": [
            {val: "2D cartoon", label: "2D å¡é€š (2D cartoon)"},
            {val: "3D cartoon", label: "3D å¡é€š (3D cartoon)"},
            {val: "American comic book", label: "ç¾å¼æ¼«ç•« (American comic book)"},
            {val: "Manga", label: "æ—¥å¼æ¼«ç•« (Manga)"},
            {val: "Anime style", label: "å‹•ç•«é¢¨æ ¼ (Anime style)"}
        ],
        "å¡é€šå‹•ç•«å…¬å¸ (Studios)": [
            {val: "Pixar Animation", label: "çš®å…‹æ–¯ (Pixar)"},
            {val: "DreamWorks Animation", label: "å¤¢å·¥å»  (DreamWorks)"},
            {val: "Walt Disney Animation", label: "è¿ªå£«å°¼ (Disney)"},
            {val: "Ghibli Studio", label: "å‰åœåŠ› (Ghibli)"},
            {val: "Toei Animation", label: "æ±æ˜ å‹•ç•« (Toei)"},
            {val: "Kyoto Animation", label: "äº¬éƒ½å‹•ç•« (Kyoto Animation)"},
            {val: "Marvel Animation", label: "æ¼«å¨ (Marvel)"}
        ],
        "å¡é€šå‹•ç•«åç¨± (Animation Names)": [
            {val: "SpongeBob", label: "æµ·ç¶¿å¯¶å¯¶ (SpongeBob)"},
            {val: "Mickey Mouse", label: "ç±³è€é¼  (Mickey Mouse)"},
            {val: "The Simpsons", label: "è¾›æ™®æ£®å®¶æ— (The Simpsons)"},
            {val: "Dragon ball", label: "ä¸ƒé¾ç  (Dragon ball)"},
            {val: "Doraemon", label: "å“†å•¦Aå¤¢ (Doraemon)"},
            {val: "Sailor Moon", label: "ç¾å°‘å¥³æˆ°å£« (Sailor Moon)"},
            {val: "Demon Slayer", label: "é¬¼æ»…ä¹‹åˆƒ (Demon Slayer)"},
            {val: "Cyberpunk", label: "è³½åšé¾å…‹ (Cyberpunk)"},
            {val: "JoJo's Bizarre Adventure", label: "JoJo (JoJo)"}
        ],
        "è—è¡“æµæ´¾ (Movements)": [
            {val: "Renaissance", label: "æ–‡è—å¾©èˆˆ (Renaissance)"},
            {val: "Impressionism", label: "å°è±¡æ´¾ (Impressionism)"},
            {val: "Surrealism", label: "è¶…ç¾å¯¦ä¸»ç¾© (Surrealism)"},
            {val: "Cubism", label: "ç«‹é«”ä¸»ç¾© (Cubism)"},
            {val: "Pop Art", label: "æ™®æ™®è—è¡“ (Pop Art)"},
            {val: "Minimalism", label: "æ¥µç°¡ä¸»ç¾© (Minimalism)"},
            {val: "Cyber Art", label: "è³½åšè—è¡“ (Cyber Art)"},
            {val: "Steampunk", label: "è’¸æ°£é¾å…‹ (Steampunk)"},
            {val: "Synthwave", label: "åˆæˆæ³¢ (Synthwave)"}
        ],
        "è—è¡“å®¶ (Artists)": [
            {val: "Vincent van Gogh", label: "æ¢µè°· (Van Gogh)"},
            {val: "Leonardo da Vinci", label: "é”æ–‡è¥¿ (Da Vinci)"},
            {val: "Picasso", label: "ç•¢å¡ç´¢ (Picasso)"},
            {val: "Dali", label: "é”åˆ© (Dali)"},
            {val: "Monet", label: "è«å…§ (Monet)"},
            {val: "Mucha", label: "æ…•å¤ (Mucha)"},
            {val: "Andy Warhol", label: "å®‰è¿ªæ²ƒè· (Warhol)"},
            {val: "Katsushika Hokusai", label: "è‘›é£¾åŒ—é½‹ (Hokusai)"},
            {val: "Yayoi Kusama", label: "è‰é–“å½Œç”Ÿ (Kusama)"},
            {val: "Makoto Shinkai", label: "æ–°æµ·èª  (Makoto Shinkai)"}
        ],
        "ç‰¹è‰²é¢¨æ ¼ (Distinctive Styles)": [
            {val: "8-bit pixel art", label: "8-bit åƒç´  (8-bit pixel art)"},
            {val: "16-bit pixel art", label: "16-bit åƒç´  (16-bit pixel art)"},
            {val: "Isometric pixel art", label: "ç­‰è·åƒç´  (Isometric pixel art)"},
            {val: "Voxel art", label: "é«”ç´ è—è¡“ (Voxel art)"}
        ],
        "å•†å“çµæ§‹èˆ‡ä»‹ç´¹ (Product Design)": [
            {val: "Encyclopedia of", label: "ç™¾ç§‘å…¨æ›¸é¢¨æ ¼ (Encyclopedia of...)"},
            {val: "3D Model Exploded View", label: "3D åˆ†è§£åœ– (Exploded View)"},
            {val: "diagrammatic drawing", label: "ç¤ºæ„åœ– (diagrammatic drawing)"},
            {val: "character toy", label: "å…¬ä»”ç©å…· (character toy)"}
        ],
        "å¹³é¢è¨­è¨ˆèˆ‡å®¤å…§è¨­è¨ˆ (Design)": [
            {val: "mascot logo", label: "å‰ç¥¥ç‰© Logo (mascot logo)"},
            {val: "Minimal Line logo", label: "æ¥µç°¡ç·šæ¢ Logo (Minimal Line logo)"},
            {val: "2D floor plan", label: "2D å¹³é¢åœ– (2D floor plan)"},
            {val: "3D floor plan", label: "3D å®¤å…§è¨­è¨ˆ (3D floor plan)"},
            {val: "UI design", label: "UI è¨­è¨ˆ (UI design)"}
        ]
    };

    // åˆå§‹åŒ–é é¢
    function init() {
        const container = document.getElementById('optionsContainer');
        
        for (const [category, items] of Object.entries(data)) {
            const wrapper = document.createElement('div');
            wrapper.className = 'category-group';
            
            const title = document.createElement('h5');
            title.textContent = category;
            wrapper.appendChild(title);
            
            const select = document.createElement('select');
            select.className = 'form-select category-select';
            select.setAttribute('data-category', category);
            
            // é è¨­é¸é …
            const defaultOption = document.createElement('option');
            defaultOption.value = "";
            defaultOption.textContent = "--- è«‹é¸æ“‡ (é¸å¡«) ---";
            select.appendChild(defaultOption);
            
            // å¡«å…¥é¸é …
            items.forEach(item => {
                const opt = document.createElement('option');
                opt.value = item.val;
                opt.textContent = item.label;
                select.appendChild(opt);
            });
            
            wrapper.appendChild(select);
            container.appendChild(wrapper);
        }
    }

    // åˆ¤æ–·æ˜¯å¦åŒ…å«ä¸­æ–‡å­—ç¬¦
    function hasChinese(text) {
        return /[\u4e00-\u9fa5]/.test(text);
    }

    // åŸ·è¡Œç¿»è­¯ (ä½¿ç”¨ MyMemory API)
    async function translateInput() {
        const inputEl = document.getElementById('mainSubject');
        const statusEl = document.getElementById('translationStatus');
        const text = inputEl.value.trim();

        if (!text) return;
        
        // å¦‚æœæ²’æœ‰ä¸­æ–‡ï¼Œä¸”ä½¿ç”¨è€…é»æ“Šäº†ï¼Œå°±ç•¶ä½œä¸éœ€è¦ç¿»è­¯ï¼Œä½†ä¹Ÿå¯ä»¥ä¸åšå‹•ä½œ
        if (!hasChinese(text)) {
            // å·²ç¶“æ˜¯è‹±æ–‡æˆ–ä¸éœ€è¦ç¿»è­¯
            return text; 
        }

        // UI ç‹€æ…‹æ›´æ–°
        statusEl.style.display = 'block';
        document.getElementById('translateBtn').disabled = true;

        try {
            // å‘¼å« MyMemory API (å…è²»å…¬é–‹ API)
            const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=zh-TW|en`);
            const data = await response.json();
            
            if (data.responseData && data.responseData.translatedText) {
                inputEl.value = data.responseData.translatedText;
                statusEl.style.display = 'none';
                return data.responseData.translatedText;
            } else {
                throw new Error("Translation failed");
            }
        } catch (error) {
            console.error("ç¿»è­¯å¤±æ•—:", error);
            statusEl.textContent = "ç¿»è­¯æœå‹™å¿™ç¢Œä¸­ï¼Œè«‹ç¨å¾Œå†è©¦æˆ–ç›´æ¥ç”¢å‡ºã€‚";
            setTimeout(() => { statusEl.style.display = 'none'; }, 3000);
            return text; // å¤±æ•—æ™‚å›å‚³åŸæ–‡
        } finally {
            document.getElementById('translateBtn').disabled = false;
        }
    }

    // ç”¢å‡ºæç¤ºè©
    async function generatePrompt() {
        let mainSubject = document.getElementById('mainSubject').value.trim();
        const generateBtn = document.querySelector('.btn-primary');
        const originalBtnText = generateBtn.textContent;

        // å¦‚æœæª¢æ¸¬åˆ°ä¸­æ–‡ï¼Œå…ˆå˜—è©¦è‡ªå‹•ç¿»è­¯
        if (hasChinese(mainSubject)) {
            generateBtn.textContent = "â³ ç¿»è­¯ä¸­...";
            generateBtn.disabled = true;
            mainSubject = await translateInput();
            generateBtn.textContent = originalBtnText;
            generateBtn.disabled = false;
        }

        const selects = document.querySelectorAll('.category-select');
        let promptParts = [];

        if (mainSubject) {
            promptParts.push(mainSubject);
        }

        selects.forEach(select => {
            if (select.value) {
                promptParts.push(select.value);
            }
        });

        // åŠ ä¸Šé è¨­åƒæ•¸ (å¯é¸)
        promptParts.push("--v 6.0");

        const finalPrompt = promptParts.join(', ');
        document.getElementById('outputPrompt').value = finalPrompt;
    }

    // è¤‡è£½åŠŸèƒ½
    function copyToClipboard() {
        const copyText = document.getElementById("outputPrompt");
        copyText.select();
        copyText.setSelectionRange(0, 99999); // For mobile devices
        navigator.clipboard.writeText(copyText.value);
        
        // ç°¡å–®çš„è¦–è¦ºå›é¥‹
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = "å·²è¤‡è£½!";
        setTimeout(() => btn.textContent = originalText, 2000);
    }

    // è¨»å†Š Service Worker
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js')
                .then(reg => console.log('SW registered!', reg))
                .catch(err => console.log('SW registration failed', err));
        });
    }

    init();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
