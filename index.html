<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¸€æŒ‡æç¤º (çµ‚æ¥µå®Œæ•´ç‰ˆ PRO)</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

    <style>
        :root { --bg-deep: #050505; --glass-border: rgba(255, 255, 255, 0.12); --text-main: #E0E0E0; --accent-glow: #3b82f6; --study-purple: #9c27b0; }
        body { background-color: var(--bg-deep); color: var(--text-main); font-family: 'Noto Sans TC', sans-serif; height: 100dvh; display: flex; flex-direction: column; overflow: hidden; background-image: radial-gradient(circle at 50% 0%, #1a1a1a 0%, #050505 60%); }
        .app-header { background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(12px); padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.08); flex-shrink: 0; z-index: 100; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .app-title { margin: 0; font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 1rem; color: #fff; }
        .mode-switch-container { display: flex; gap: 8px; margin-bottom: 12px; background: rgba(255,255,255,0.03); padding: 4px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05); }
        .mode-btn { flex: 1; border: none; background: transparent; padding: 8px; font-size: 0.8rem; border-radius: 8px; color: #666; transition: all 0.3s; }
        .mode-btn.active { background: #222; color: #fff; }
        .app-content { flex-grow: 1; overflow-y: auto; padding: 10px; }
        .tab-content-area { display: none; }
        .tab-content-area.active { display: block; animation: fadeIn 0.3s ease; }
        .category-card { background: linear-gradient(145deg, #111, #080808); border-radius: 12px; padding: 12px; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.05); }
        .category-title { font-size: 0.75rem; color: #888; margin-bottom: 8px; border-left: 3px solid var(--accent-glow); padding-left: 8px; display: block; font-weight: 700; }
        .form-select { background-color: #080808; border: 1px solid #333; color: #fff; border-radius: 8px; font-size: 0.85rem; }
        .nav-tabs { border: none; gap: 6px; padding-bottom: 10px; flex-wrap: nowrap; overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .nav-link { border: 1px solid transparent; border-radius: 15px; background: rgba(255,255,255,0.05); color: #888; font-size: 0.75rem; padding: 6px 12px; white-space: nowrap; }
        .nav-link.active { background: #fff; color: #000; font-weight: 700; }
        .disabled-tab { opacity: 0.2; pointer-events: none; }
        .app-footer { background: rgba(10, 10, 10, 0.95); padding: 15px 15px 25px 15px; border-top: 1px solid rgba(255,255,255,0.1); }
        .output-box { background-color: #000; border: 1px solid #333; border-radius: 10px; padding: 8px; margin-bottom: 8px; position: relative; }
        .prompt-label { font-size: 0.6rem; color: #555; margin-bottom: 4px; display: block; font-weight: 700; text-transform: uppercase; }
        textarea { width: 100%; background: transparent; border: none; outline: none; resize: none; font-family: monospace; font-size: 0.8rem; color: #00ff9d; }
        .locked-badge { font-size: 0.6rem; color: #ff5252; margin-left: 2px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="app-header">
        <div class="top-bar">
            <h6 class="app-title">âœ¨ PROMPT LANG PRO</h6>
            <button id="loginBtn" class="btn btn-sm btn-outline-light rounded-pill" onclick="googleLogin()">ç™»å…¥</button>
            <div id="userInfo" style="display:none; align-items:center; gap:8px;">
                <img id="userPhoto" src="" style="width:24px; border-radius:50%;">
                <span id="userName" style="font-size:0.75rem; color:#bbb;"></span>
            </div>
        </div>
        <div class="mode-switch-container">
            <button class="mode-btn active" onclick="setMode('create')" id="mode-create">ğŸ¨ å‰µä½œ</button>
            <button class="mode-btn" onclick="setMode('study')" id="mode-study">ğŸ”® å­¸ç¿’</button>
        </div>
        <div class="input-group mb-2" id="mainInputGroup">
            <input type="text" class="form-control form-control-sm" id="mainSubject" placeholder="è¼¸å…¥ä¸»é¡Œ (å¦‚: è²“)...">
            <button class="btn btn-sm btn-dark" onclick="translateInput()">ä¸­è½‰è‹±</button>
        </div>
        <div class="nav nav-tabs" id="myTab">
            <button class="nav-link active" onclick="switchTab(this, 'page-settings')">âš™ï¸ è¨­å®š</button>
            <button class="nav-link" onclick="switchTab(this, 'page-char')">ğŸ‘¤ äººç‰©</button>
            <button class="nav-link" onclick="switchTab(this, 'page-photo')">ğŸ“¸ æ”å½±</button>
            <button class="nav-link" onclick="switchTab(this, 'page-art')">ğŸ¨ è—è¡“/è¨­è¨ˆ</button>
            <button class="nav-link" onclick="switchTab(this, 'page-anime')">ğŸ§¸ å‹•æ¼«</button>
        </div>
    </div>

    <div class="app-content">
        <div id="page-settings" class="tab-content-area active">
            <div class="category-card">
                <label class="category-title">ğŸ“ åœ–ç‰‡æ¯”ä¾‹</label>
                <select class="form-select form-select-sm" id="aspectRatio">
                    <option value="">1:1 (é è¨­)</option>
                    <option value="--ar 16:9">16:9 (å¯¬è¢å¹•)</option>
                    <option value="--ar 9:16">9:16 (æ‰‹æ©Ÿç›´å¼)</option>
                    <option value="--ar 4:3">4:3 (æ¨™æº–ç…§ç‰‡)</option>
                    <option value="--ar 2:1">2:1 (å…¨æ™¯/360åº¦æ¨è–¦)</option>
                </select>
            </div>
            <div class="category-card">
                <label class="category-title">ğŸ’ è¼”åŠ©è© (ç´°ç¯€èˆ‡å…‰å½±)</label>
                <select class="form-select form-select-sm" id="auxWords">
                    <option value="">ä¸æŒ‡å®š</option>
                    <option value="bright">bright (ç’°å¢ƒè¼ƒæ˜äº®)</option>
                    <option value="dark">dark (ç’°å¢ƒè¼ƒæš—)</option>
                    <option value="realistic">realistic (é€¼çœŸçš„)</option>
                    <option value="very realistic, highly textured">very realistic (å¼·èª¿ç´‹ç†èˆ‡æ¯›é«®)</option>
                    <option value="very detailed, intricate">very detailed (ç´°éƒ¨ç‰©ä»¶å¢åŠ )</option>
                    <option value="high resolution, 8K">8K high resolution (é«˜åˆ†è¾¨ç‡ç•«è³ª)</option>
                    <option value="b/w, monochrome">b/w (é»‘ç™½ç…§ç‰‡é¢¨æ ¼)</option>
                </select>
            </div>
        </div>

        <div id="page-char" class="tab-content-area"><div id="container-char"></div></div>
        <div id="page-photo" class="tab-content-area"><div id="container-photo"></div></div>
        <div id="page-art" class="tab-content-area"><div id="container-art"></div></div>
        <div id="page-anime" class="tab-content-area"><div id="container-anime"></div></div>
    </div>

    <div class="app-footer">
        <div class="output-box">
            <span class="prompt-label">Prompt Output</span>
            <textarea id="outputPrompt" rows="2" readonly placeholder="é¸å–é¸é …..."></textarea>
        </div>
        <button class="btn btn-primary w-100 fw-bold py-2" style="border-radius:10px;" onclick="generatePrompt()">âœ¨ ç”¢å‡ºæŒ‡ä»¤</button>
    </div>

<script>
    const categorizedData = {
        "char": {
            "åŸºç¤å¤–è§€": [{val:"T-shirt and jeans", label:"ç°¡ç´„ç©¿æ­"}, {val:"Formal suit", label:"æ­£å¼è¥¿è£"}, {val:"Long hair", label:"é•·é«®"}, {val:"Glasses", label:"çœ¼é¡"}],
            "è¡¨æƒ…ç‹€æ…‹": [{val:"Smiling", label:"å¾®ç¬‘"}, {val:"Looking at viewer", label:"ç›´è¦–é¡é ­"}, {val:"Serious", label:"åš´è‚…"}]
        },
        "photo": {
            "æ”å½±é¡å‹": [
                {id: "photo_type", val: "photo", label: "ç…§ç‰‡/æ”å½±"},
                {id: "photo_type", val: "life photo", label: "ç”Ÿæ´»ç…§ (éæ­£å¼)"},
                {id: "photo_type", val: "group photo", label: "åœ˜é«”ç…§"},
                {id: "photo_type", val: "portrait photography", label: "äººåƒæ”å½±"},
                {id: "photo_type", val: "macro photography", label: "å¾®è·æ”å½±"},
                {id: "photo_type", val: "still life photo", label: "éœç‰©æ”å½±"}
            ],
            "å…‰åœˆ (éœ€é¸æ”å½±æ¨¡å¼)": [
                {id:"ap", val:"f/1.4", label:"f/1.4 (è¶…å¤§å…‰åœˆ/æ¥µæ·ºæ™¯æ·±)"},
                {id:"ap", val:"f/2.8", label:"f/2.8 (å¸¸ç”¨å¤§å…‰åœˆ)"},
                {id:"ap", val:"f/8", label:"f/8 (é¢¨æ™¯é€šç”¨)"},
                {id:"ap", val:"f/22", label:"f/22 (å…¨æ¸…æ™°æ·±æ™¯æ·±)"}
            ],
            "ç„¦è· (éœ€é¸æ”å½±æ¨¡å¼)": [
                {id:"focal", val:"20mm", label:"20mm (è¶…å»£è§’)"},
                {id:"focal", val:"35mm", label:"35mm (äººæ–‡å®šç„¦)"},
                {id:"focal", val:"85mm", label:"85mm (äººåƒé¡é ­)"},
                {id:"focal", val:"200mm", label:"200mm (é•·ç„¦æœ›é )"}
            ],
            "é¡é ­èˆ‡å…‰å­¸": [
                {val:"bokeh", label:"æ•£æ™¯ (å¤±ç„¦å…‰æšˆæ•ˆæœ)"},
                {val:"fish eye lens", label:"é­šçœ¼é¡é ­ (æ¥µåº¦æ‰­æ›²å»£è§’)"},
                {val:"tilt shift lens", label:"ç§»è»¸é¡é ­ (å°äººåœ‹æ¨¡å‹æ•ˆæœ)"},
                {val:"lens flare", label:"é¡é ­çœ©å…‰ (æ”¾å°„ç‹€å…‰ç·š)"}
            ],
            "ç‡ˆå…‰èˆ‡æ¨¡ç³Š": [
                {val:"motion blur", label:"å‹•æ…‹æ¨¡ç³Š (è·Ÿéš¨æ„Ÿ)"},
                {val:"soft light", label:"è»Ÿå…‰ (å…‰ç·šç™¼æ•£æŸ”å’Œ)"},
                {val:"rim light", label:"è¼ªå»“å…‰ (ä¸»è§’é‚Šç·£äº®èµ·)"},
                {val:"HDR", label:"HDR (é«˜å‹•æ…‹å¼·åŒ–æš—éƒ¨)"}
            ],
            "ç•«é¢è§’åº¦": [
                {val:"low angle view", label:"ä½è§’åº¦ (ä¸‹å¾€ä¸Šæ‹)"},
                {val:"bird view", label:"é³¥ç° (é«˜è™•å¾€ä¸‹æ‹)"},
                {val:"satellite view", label:"è¡›æ˜Ÿè¦–è§’ (ç©ºç…§åœ–æ„Ÿ)"},
                {val:"the first person view", label:"ç¬¬ä¸€äººç¨±è¦–è§’"}
            ],
            "ç•«é¢é è¿‘": [
                {val:"facial features extreme close up", label:"æ¥µç‰¹å¯« (äº”å®˜ç´°ç¯€)"},
                {val:"full body shot", label:"å…¨èº«ç…§"},
                {val:"ar away shot", label:"é è™•æ‹æ”"}
            ],
            "ç‰¹æ®Šæ•ˆæœèˆ‡é¢¨æ ¼": [
                {val:"knolling", label:"é–‹ç®±ç…§ (ç‰©ä»¶æ•´é½Šæ’åˆ—)"},
                {val:"microscope view", label:"é¡¯å¾®é¡è¦–è§’"},
                {val:"360 degrees photo", label:"360åº¦å…¨æ™¯ç…§"},
                {val:"X-ray view", label:"Xå…‰ç‰‡é¢¨æ ¼"},
                {val:"Polaroid style", label:"æ‹ç«‹å¾—é¢¨æ ¼"},
                {val:"Fujifilm superia style", label:"å¯Œå£«åº•ç‰‡é¢¨æ ¼"}
            ]
        },
        "art": {
            "ç¹ªç•«åª’æ": [
                {val:"watercolor painting", label:"æ°´å½©ç•«"},
                {val:"oil painting", label:"æ²¹ç•«"},
                {val:"charcoal drawing", label:"ç‚­ç­†ç•«"},
                {val:"chinese ink drawing", label:"ä¸­åœ‹æ°´å¢¨ç•«"},
                {val:"Gongbi painting", label:"å·¥ç­†ç•« (ç´°è†©å‹¾å‹’)"}
            ],
            "è—è¡“æµæ´¾": [
                {val:"Renaissance", label:"æ–‡è—å¾©èˆˆè—è¡“"},
                {val:"Impressionisme", label:"å°è±¡æ´¾"},
                {val:"Surrealism", label:"è¶…ç¾å¯¦ä¸»ç¾©"},
                {val:"Ukiyo-e", label:"æµ®ä¸–ç¹ª"},
                {val:"Cyber Art", label:"æ•¸ä½/è³½åšè—è¡“"}
            ],
            "ä¸–ç•Œåå®¶": [
                {val:"Leonardo da Vinci", label:"é”æ–‡è¥¿"},
                {val:"Vincent van Gogh", label:"æ¢µè°·"},
                {val:"Picasso", label:"ç•¢å¡ç´¢"},
                {val:"Yayoi Kusama", label:"è‰é–“å½Œç”Ÿ"},
                {val:"Warhol", label:"å®‰è¿ªæ²ƒè·"}
            ],
            "ç‰¹æ®Šå·¥è—æè³ª": [
                {val:"paper art", label:"ç´™é›•è—è¡“"},
                {val:"lego", label:"æ¨‚é«˜ç©æœ¨æ„Ÿ"},
                {val:"felt doll", label:"ç¾Šæ¯›æ°ˆå¨ƒå¨ƒæ„Ÿ"},
                {val:"Alebrije", label:"å¢¨è¥¿å“¥ç¥ç¸æœ¨é›•"},
                {val:"stained glass", label:"å½©ç¹ªç»ç’ƒæ„Ÿ"}
            ],
            "è¨­è¨ˆèˆ‡åœ–è¡¨": [
                {val:"3D Model Exploded View", label:"3D åˆ†è§£åœ–"},
                {val:"mascot logo", label:"å‰ç¥¥ç‰© Logo è¨­è¨ˆ"},
                {val:"3D floor plan", label:"3D å®¤å…§è¨­è¨ˆåœ–"},
                {val:"Infographic", label:"è³‡è¨Šåœ–è¡¨æ„Ÿ"}
            ]
        },
        "anime": {
            "è£½ä½œå…¬å¸": [
                {val:"Ghibli Studio", label:"å‰åœåŠ›å·¥ä½œå®¤"},
                {val:"Pixar Animation", label:"çš®å…‹æ–¯å‹•ç•«æ„Ÿ"},
                {val:"Ufotable Animation", label:"Ufotable (é¬¼æ»…é¢¨æ ¼)"},
                {val:"Walt Disney Animation", label:"è¿ªå£«å°¼å‹•ç•«æ„Ÿ"}
            ],
            "ç¶“å…¸ä½œå“/é¢¨æ ¼": [
                {val:"Dragon ball", label:"ä¸ƒé¾ç é¢¨æ ¼"},
                {val:"Sailor Moon", label:"ç¾å°‘å¥³æˆ°å£«é¢¨æ ¼"},
                {val:"One Piece", label:"æµ·è³Šç‹é¢¨æ ¼"},
                {val:"JoJo's Bizarre Adventure", label:"JoJo å¥‡å¹»å†’éšªé¢¨æ ¼"}
            ],
            "åƒç´ è—è¡“ (Pixel Art)": [
                {val:"8-bit pixel art", label:"8-bit å¾©å¤åƒç´ "},
                {val:"Isometric pixel art", label:"ç­‰è·åƒç´  (ç«‹é«”åœ°åœ–æ„Ÿ)"},
                {val:"2D Pixel Art Game Assets Sprite", label:"2D éŠæˆ²å ´æ™¯æ‹†è§£åœ–"}
            ]
        }
    };

    function init() {
        for (const [tabKey, categories] of Object.entries(categorizedData)) {
            const container = document.getElementById(`container-${tabKey}`);
            if (!container) continue;
            for (const [catName, items] of Object.entries(categories)) {
                const card = document.createElement('div'); card.className = 'category-card';
                card.innerHTML = `<label class="category-title">${catName}</label>`;
                const select = document.createElement('select'); select.className = 'form-select form-select-sm category-select';
                if (items[0].id) select.id = items[0].id;
                select.appendChild(new Option("è«‹é¸æ“‡...", ""));
                items.forEach(item => select.appendChild(new Option(item.label, item.val)));
                card.appendChild(select); container.appendChild(card);
            }
        }
        document.getElementById('photo_type')?.addEventListener('change', checkLocks);
        initFirebase();
    }

    function checkLocks() {
        const photoVal = document.getElementById('photo_type').value;
        const isPhoto = photoVal !== "";
        // é–å®šå…‰åœˆèˆ‡ç„¦è·
        ['ap', 'focal'].forEach(id => {
            const el = document.getElementById(id);
            if(el) { el.disabled = !isPhoto; if(!isPhoto) el.value=""; }
        });
        // æ”å½±æ¨¡å¼ä¸‹ç¦ç”¨è—è¡“èˆ‡å‹•æ¼« (é é˜²é¢¨æ ¼è¡çª)
        const artBtn = document.querySelector('button[onclick*="page-art"]');
        const animeBtn = document.querySelector('button[onclick*="page-anime"]');
        artBtn.classList.toggle('disabled-tab', isPhoto);
        animeBtn.classList.toggle('disabled-tab', isPhoto);
        if(isPhoto) {
            artBtn.innerHTML = `ğŸ¨ è—è¡“ <span class="locked-badge">ğŸ”’æ”å½±ä¸­</span>`;
            animeBtn.innerHTML = `ğŸ§¸ å‹•æ¼« <span class="locked-badge">ğŸ”’æ”å½±ä¸­</span>`;
        } else {
            artBtn.innerHTML = `ğŸ¨ è—è¡“/è¨­è¨ˆ`;
            animeBtn.innerHTML = `ğŸ§¸ å‹•æ¼«`;
        }
    }

    function switchTab(btn, id) {
        if(btn.classList.contains('disabled-tab')) return alert("âš ï¸ æ”å½±æ¨¡å¼èˆ‡è—è¡“é¢¨æ ¼è¡çªï¼Œè«‹å…ˆå–æ¶ˆæ”å½±é¡å‹");
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.tab-content-area').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function generatePrompt() {
        const parts = [];
        const sub = document.getElementById('mainSubject').value; if(sub) parts.push(sub);
        document.querySelectorAll('.app-content select').forEach(s => {
            if(s.value && !s.disabled && s.id !== 'aspectRatio' && s.id !== 'auxWords') parts.push(s.value);
        });
        const aux = document.getElementById('auxWords').value; if(aux) parts.push(aux);
        const ar = document.getElementById('aspectRatio').value; if(ar) parts.push(ar);
        document.getElementById('outputPrompt').value = parts.join(", ");
    }

    async function translateInput() {
        const t = document.getElementById('mainSubject').value; if(!t) return;
        const res = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(t)}&langpair=zh-TW|en`);
        const data = await res.json(); 
        document.getElementById('mainSubject').value = data.responseData.translatedText;
    }

    function initFirebase() {
        const config = { apiKey: "AIzaSyBHwTNxIIQ0dZVI6beyZa4K5S3y8Brh96g", authDomain: "ntu-test-54b93.firebaseapp.com", projectId: "ntu-test-54b93" };
        try { firebase.initializeApp(config); firebase.auth().onAuthStateChanged(user => {
            if (user) {
                document.getElementById('loginBtn').style.display = 'none';
                document.getElementById('userInfo').style.display = 'flex';
                document.getElementById('userPhoto').src = user.photoURL;
                document.getElementById('userName').textContent = user.displayName;
            }
        }); } catch(e) {}
    }
    function googleLogin() { firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider()); }
    function setMode(mode) {
        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(`mode-${mode}`).classList.add('active');
    }

    init();
</script>
</body>
</html>
